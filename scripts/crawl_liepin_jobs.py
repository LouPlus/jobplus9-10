import scrapy
import re

class CompanySpider(scrapy.Spider):
    name = 'jobs'


    start_urls = [
    'https://www.liepin.com/job/1911958129.shtml',
 'https://www.liepin.com/job/1916408959.shtml',
 'https://www.liepin.com/job/1911113669.shtml',
 'https://www.liepin.com/job/1915799509.shtml',
 'https://www.liepin.com/job/1916439713.shtml',
 'https://www.liepin.com/job/1915447236.shtml',
 'https://www.liepin.com/job/1913667256.shtml',
 'https://www.liepin.com/job/1916347947.shtml',
 'https://www.liepin.com/job/1916294669.shtml',
 'https://www.liepin.com/job/1916010451.shtml',
 'https://www.liepin.com/job/1916390793.shtml',
 'https://www.liepin.com/job/1915498197.shtml',
 'https://www.liepin.com/job/1916042081.shtml',
 'https://www.liepin.com/job/1916293089.shtml',
 'https://www.liepin.com/job/1916414345.shtml',
 'https://www.liepin.com/job/1916281327.shtml',
 'https://www.liepin.com/job/197638801.shtml',
 'https://www.liepin.com/job/1916317723.shtml',
 'https://www.liepin.com/job/1913808479.shtml',
 'https://www.liepin.com/job/1916408427.shtml',
 'https://www.liepin.com/job/1915915547.shtml',
 'https://www.liepin.com/job/1913727383.shtml',
 'https://www.liepin.com/job/1915896565.shtml',
 'https://www.liepin.com/job/1916365565.shtml',
 'https://www.liepin.com/job/1916054699.shtml',
 'https://www.liepin.com/job/199395499.shtml',
 'https://www.liepin.com/job/1916365491.shtml',
 'https://www.liepin.com/job/1916345769.shtml',
 'https://www.liepin.com/job/1915155018.shtml',
 'https://www.liepin.com/job/1916284105.shtml',
 'https://www.liepin.com/job/1916312681.shtml',
 'https://www.liepin.com/job/1916340597.shtml',
 'https://www.liepin.com/job/1916337685.shtml',
 'https://www.liepin.com/job/1915761416.shtml',
 'https://www.liepin.com/job/1915442612.shtml',
 'https://www.liepin.com/job/1914475007.shtml',
 'https://www.liepin.com/job/1915011627.shtml',
 'https://www.liepin.com/job/1915715352.shtml',
 'https://www.liepin.com/job/1916442461.shtml',
 'https://www.liepin.com/job/1916441781.shtml',
 'https://www.liepin.com/job/1916441707.shtml',
 'https://www.liepin.com/job/1916441589.shtml',
 'https://www.liepin.com/job/1916441271.shtml',
 'https://www.liepin.com/job/1916440973.shtml',
 'https://www.liepin.com/job/1916092927.shtml',
 'https://www.liepin.com/job/1916438515.shtml',
 'https://www.liepin.com/job/1916438413.shtml',
 'https://www.liepin.com/job/1916438277.shtml',
 'https://www.liepin.com/job/1916438145.shtml',
 'https://www.liepin.com/job/1916435141.shtml',
 'https://www.liepin.com/job/1915046542.shtml',
 'https://www.liepin.com/job/1916436729.shtml',
 'https://www.liepin.com/job/1916436313.shtml',
 'https://www.liepin.com/job/1916436213.shtml',
 'https://www.liepin.com/job/1916435985.shtml',
 'https://www.liepin.com/job/1915197956.shtml',
 'https://www.liepin.com/job/1915349010.shtml',
 'https://www.liepin.com/job/1915349133.shtml',
 'https://www.liepin.com/job/1915193747.shtml',
 'https://www.liepin.com/job/1916433013.shtml',
 'https://www.liepin.com/job/1916431735.shtml',
 'https://www.liepin.com/job/1916260835.shtml',
 'https://www.liepin.com/job/1916428137.shtml',
 'https://www.liepin.com/job/1916426861.shtml',
 'https://www.liepin.com/job/1916424527.shtml',
 'https://www.liepin.com/job/1915561855.shtml',
 'https://www.liepin.com/job/1915603394.shtml',
 'https://www.liepin.com/job/1914972886.shtml',
 'https://www.liepin.com/job/1914515031.shtml',
 'https://www.liepin.com/job/1914514935.shtml',
 'https://www.liepin.com/job/1914514796.shtml',
 'https://www.liepin.com/job/1916418571.shtml',
 'https://www.liepin.com/job/1916346895.shtml',
 'https://www.liepin.com/job/1915915431.shtml',
 'https://www.liepin.com/job/1915838628.shtml',
 'https://www.liepin.com/job/1915202382.shtml',
 'https://www.liepin.com/job/1915844697.shtml',
 'https://www.liepin.com/job/1916035733.shtml',
 'https://www.liepin.com/job/1916305035.shtml',
 'https://www.liepin.com/job/1913406463.shtml',
 'https://www.liepin.com/job/1912768291.shtml',
 'https://www.liepin.com/job/1916365089.shtml',
 'https://www.liepin.com/job/1915778564.shtml',
 'https://www.liepin.com/job/1916055021.shtml',
 'https://www.liepin.com/job/1915715796.shtml',
 'https://www.liepin.com/job/1915817332.shtml',
 'https://www.liepin.com/job/1915332165.shtml',
 'https://www.liepin.com/job/1913841641.shtml',
 'https://www.liepin.com/job/1913837275.shtml',
 'https://www.liepin.com/job/1913819837.shtml',
 'https://www.liepin.com/job/1913813817.shtml',
 'https://www.liepin.com/job/1915266249.shtml',
 'https://www.liepin.com/job/1914061297.shtml',
 'https://www.liepin.com/job/1915470630.shtml',
 'https://www.liepin.com/job/1916260093.shtml',
 'https://www.liepin.com/job/1915740292.shtml',
 'https://www.liepin.com/job/1914739360.shtml',
 'https://www.liepin.com/job/1913942716.shtml',
 'https://www.liepin.com/job/1913735154.shtml',
 'https://www.liepin.com/job/1915789160.shtml',
 'https://www.liepin.com/job/1915734778.shtml',
 'https://www.liepin.com/job/1915698346.shtml',
 'https://www.liepin.com/job/1915609504.shtml',
 'https://www.liepin.com/job/1915530826.shtml',
 'https://www.liepin.com/job/1915421236.shtml',
 'https://www.liepin.com/job/1915081632.shtml',
 'https://www.liepin.com/job/1915081232.shtml',
 'https://www.liepin.com/job/1914791422.shtml',
 'https://www.liepin.com/job/1914608831.shtml',
 'https://www.liepin.com/job/1914152057.shtml',
 'https://www.liepin.com/job/1914977155.shtml',
 'https://www.liepin.com/job/1914975443.shtml',
 'https://www.liepin.com/job/1914634752.shtml',
 'https://www.liepin.com/job/1915677284.shtml',
 'https://www.liepin.com/job/1915677188.shtml',
 'https://www.liepin.com/job/1913321894.shtml',
 'https://www.liepin.com/job/1915414052.shtml',
 'https://www.liepin.com/job/1915382743.shtml',
 'https://www.liepin.com/job/1915034360.shtml',
 'https://www.liepin.com/job/1911788210.shtml',
 'https://www.liepin.com/job/1911785577.shtml',
 'https://www.liepin.com/job/1914049684.shtml',
 'https://www.liepin.com/job/1913307706.shtml',
 'https://www.liepin.com/job/1913307699.shtml',
 'https://www.liepin.com/job/1913307686.shtml',
 'https://www.liepin.com/job/1913307618.shtml',
 'https://www.liepin.com/job/1913307616.shtml',
 'https://www.liepin.com/job/1913307575.shtml',
 'https://www.liepin.com/job/197883185.shtml',
 'https://www.liepin.com/job/195782717.shtml',
 'https://www.liepin.com/job/194795069.shtml',
 'https://www.liepin.com/job/1916145093.shtml',
 'https://www.liepin.com/job/1916109689.shtml',
 'https://www.liepin.com/job/1916087029.shtml',
 'https://www.liepin.com/job/1915071206.shtml',
 'https://www.liepin.com/job/1915930711.shtml',
 'https://www.liepin.com/job/1915919845.shtml',
 'https://www.liepin.com/job/1915725696.shtml',
 'https://www.liepin.com/job/1915725660.shtml',
 'https://www.liepin.com/job/1915666593.shtml',
 'https://www.liepin.com/job/1915827186.shtml',
 'https://www.liepin.com/job/1915388162.shtml',
 'https://www.liepin.com/job/1915375600.shtml',
 'https://www.liepin.com/job/1915370244.shtml',
 'https://www.liepin.com/job/1915350819.shtml',
 'https://www.liepin.com/job/1915320254.shtml',
 'https://www.liepin.com/job/1915139770.shtml',
 'https://www.liepin.com/job/1915139722.shtml',
 'https://www.liepin.com/job/1915139570.shtml',
 'https://www.liepin.com/job/1915139384.shtml',
 'https://www.liepin.com/job/1915139092.shtml',
 'https://www.liepin.com/job/1915139066.shtml',
 'https://www.liepin.com/job/1915138969.shtml',
 'https://www.liepin.com/job/1915656832.shtml',
 'https://www.liepin.com/job/1915829004.shtml',
 'https://www.liepin.com/job/1915793827.shtml',
 'https://www.liepin.com/job/1915671495.shtml',
 'https://www.liepin.com/job/1914999588.shtml',
 'https://www.liepin.com/job/1914884617.shtml',
 'https://www.liepin.com/job/1914873318.shtml',
 'https://www.liepin.com/job/1914865684.shtml',
 'https://www.liepin.com/job/1914780011.shtml',
 'https://www.liepin.com/job/1914575832.shtml',
 'https://www.liepin.com/job/1914257776.shtml',
 'https://www.liepin.com/job/1914088916.shtml',
 'https://www.liepin.com/job/1913970327.shtml',
 'https://www.liepin.com/job/1915553067.shtml',
 'https://www.liepin.com/job/1914919692.shtml',
 'https://www.liepin.com/job/1914912741.shtml',
 'https://www.liepin.com/job/1914819153.shtml',
 'https://www.liepin.com/job/1914795589.shtml',
 'https://www.liepin.com/job/1914790790.shtml',
 'https://www.liepin.com/job/1914615080.shtml',
 'https://www.liepin.com/job/1914173401.shtml',
 'https://www.liepin.com/job/1916239049.shtml',
 'https://www.liepin.com/job/1912725659.shtml',
 'https://www.liepin.com/job/1915740978.shtml',
 'https://www.liepin.com/job/1915723465.shtml',
 'https://www.liepin.com/job/1915688244.shtml',
 'https://www.liepin.com/job/1915651149.shtml',
 'https://www.liepin.com/job/1915625115.shtml',
 'https://www.liepin.com/job/1915433717.shtml',
 'https://www.liepin.com/job/1915659658.shtml',
 'https://www.liepin.com/job/1915557277.shtml',
 'https://www.liepin.com/job/1915555632.shtml',
 'https://www.liepin.com/job/1915554158.shtml',
 'https://www.liepin.com/job/1915698648.shtml',
 'https://www.liepin.com/job/1911121763.shtml',
 'https://www.liepin.com/job/199582575.shtml',
 'https://www.liepin.com/job/199416078.shtml',
 'https://www.liepin.com/job/198762572.shtml',
 'https://www.liepin.com/job/1915885863.shtml',
 'https://www.liepin.com/job/1915856692.shtml',
 'https://www.liepin.com/job/1915856457.shtml',
 'https://www.liepin.com/job/1915830845.shtml',
 'https://www.liepin.com/job/1915795230.shtml',
 'https://www.liepin.com/job/1915775658.shtml',
 'https://www.liepin.com/job/1915760623.shtml'
    ]

    def parse(self, response):
        #用'#'连接,方便后面解析
        desc = '#'.join(response.xpath('.//div[contains(@class,"job-description")]/div/text()').extract()).strip()
        desc = re.sub(r'\s','',desc) #去除字符串中的whitespace
        yield  {
            'name': response.xpath('.//div[@class="title-info"]/h1/text()').extract_first(),
            'description': desc,
            'experience_requirement': response.xpath('.//div[@class="job-qualifications"]/span[2]/text()').extract_first().strip(),
            'degree_requirement': response.xpath('.//div[@class="job-qualifications"]/span[1]/text()').extract_first().strip(),
            'workplace': response.xpath('.//div[@class="job-title-left"]/p[@class="basic-infor"]/span/a/text()').extract_first().strip()
            }
